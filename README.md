
# 3DSSF 3rd assignment

This repository contains solution for 3rd 3DSSF assignment. In particular it contains

 - ICP implementation,
 - TR-ICP implementation,
 - Point cloud noise generator,
 - Transformation matrix generator,
 - Transformation matrix to Euler,
 - Nearest-neighbor search using kd-trees,
 - Evaluation of results for point cloud set,
 - Solutions to subtask 1 and subtask 2

## How to run the code
In order to run the code you must run python3 main.py and get fountain_a.ply and fountain_b.ply

## Subtask 1 & Subtask 2

In subtask 1 our goal was to implement TCP and Tr-ICP algorithm and use them on 2 related point clouds. In the subtask 2 our goal was to interpret and evaluate result of running both algorithms for different parameters.


### Euler [0.1 0.1 0.5], Translation [0.02 0.05 0.01]

**Original Transformation Matrix**
|             |             |            |      | 
|:-----------:|:-----------:|:----------:|:----:|
|  0.99003329 | -0.03998849 | 0.13503706 | 0.02 | 
|  0.09933467 |  0.8779766  | -0.4682838 | 0.05 | 
| -0.09983342 |  0.47703041 |  0.8731983 | 0.01 | 
|      0.     |      0.     |     0.     |  1.  | 

![Set 1](1.jpg?raw=true "Title")

**Results TC-ICP**
|                |                 |                 |                 |
|:--------------:|:---------------:|:---------------:|:---------------:|
| 9.96811401e-01 |  4.91922309e-02 | -6.28263918e-02 |  2.28455505e+00 |
| 1.10882918e-03 |  7.78744899e-01 |  6.27339742e-01 | -1.45437631e+00 |
| 7.97859736e-02 | -6.25409071e-01 |  7.76207248e-01 | -7.10243324e+00 |
| 0.00000000e+00 |  0.00000000e+00 |  0.00000000e+00 |  1.00000000e+00 |

**Results ICP**
|             |            |             |             |
|:-----------:|:----------:|:-----------:|:-----------:|
|  0.80797382 | 0.21976053 | -0.54670249 |  1.58766025 |
| -0.33580911 |  0.9341534 | -0.12078769 | -7.47419031 |
|  0.48415962 | 0.28118097 |  0.82856908 |  7.90740189 |
|      0.     |     0.     |      0.     |      1.     |

**Comparison**
|  Algo | Tolerance | Time | MSE translation | Angle error | Convergence |
|:-----:|:---------:|:----:|:---------------:|:-----------:|:-----------:|
| TRICP |   1e-13   |  63  |     19.13567    |  3.43774677 |     128     |
|  ICP  |   1e-13   |  47  |     40.30373    |  -5.7295779 |     130     |

### Euler [0.01 0.5 0.05], Translation [0.05 0.08 0.001]

**Original Transformation Matrix**
|             |            |             |       |
|:-----------:|:----------:|:-----------:|:-----:|
|  0.87753868 | 0.01397276 |  0.47930222 |  0.05 |
|  0.00877568 | 0.99893993 | -0.04518849 |  0.08 |
| -0.47942554 | 0.04386085 |  0.87648581 | 0.001 |
|      0.     |     0.     |      0.     |   1.  |

![Set 2](2.jpg?raw=true "Title")

**Results TC-ICP**
|             |             |             |             |
|:-----------:|:-----------:|:-----------:|:-----------:|
|  0.98491443 |  0.08192138 | -0.15242193 |  2.70662274 |
| -0.04334244 |  0.96954942 |  0.24102979 | -1.76667142 |
|  0.16752608 | -0.23078738 |  0.95847389 |  5.37630493 |
|      0.     |      0.     |      0.     |      1.     |

**Results ICP**
|             |             |            |             |
|:-----------:|:-----------:|:----------:|:-----------:|
|  0.92579064 |  0.2219018  | 0.30605765 |  5.43605044 |
| -0.24592808 |  0.96838665 | 0.04179334 | -5.62751019 |
| -0.28710812 | -0.11396005 | 0.95109518 |  0.56960948 |
|      0.     |      0.     |     0.     |      1.     |

**Comparison**
|  Algo | Tolerance | Time | MSE translation | Angle error | Convergence |
|:-----:|:---------:|:----:|:---------------:|:-----------:|:-----------:|
| TRICP |   1e-13   |  398 |     13.00569    |  16.0428183 |     995     |
|  ICP  |   1e-13   |  70  |     20.58229    |  34.3774677 |     256     |

### Euler [0.1 0 0], Translation [0.05 0.08 0]

**Original Transformation Matrix**
|            |             |    |      |
|:----------:|:-----------:|:--:|:----:|
| 0.99500417 | -0.09983342 | 0. | 0.05 |
| 0.09983342 |  0.99500417 | 0. | 0.08 |
|     0.     |      0.     | 1. |  0.  |
|     0.     |      0.     | 0. |  1.  |

![Set 3](3.jpg?raw=true "Title")

**Results TC-ICP**
|            |             |             |             |
|:----------:|:-----------:|:-----------:|:-----------:|
| 0.92642916 | -0.34025118 |  0.1611153  |  -4.1656269 |
| 0.35139606 |  0.93510815 | -0.04575542 |  3.61279142 |
| -0.1350919 |  0.09900443 |  0.98587438 | -1.19512175 |
|     0.     |      0.     |      0.     |      1.     |

**Results ICP**
|             |             |             |             |
|:-----------:|:-----------:|:-----------:|:-----------:|
|  0.93610843 |  0.14399685 | -0.32088303 |  4.0667118  |
| -0.11979556 |  0.98833482 |  0.09403882 | -4.50672211 |
|  0.33068117 | -0.04959017 |  0.94243874 |  5.44586336 |
|      0.     |      0.     |      0.     |      1.     |

**Comparison**
|  Algo | Tolerance | Time | MSE translation | Angle error | Convergence |
|:-----:|:---------:|:----:|:---------------:|:-----------:|:-----------:|
| TRICP |   1e-13   |  175 |     10.27430    |  34.9504255 |     423     |
|  ICP  |   1e-13   |  94  |     22.07217    |  35.5233833 |     321     |

### Euler [0 0.1 0.1], Translation [0 0 0]

**Original Transformation Matrix**
|             |            |             |    |
|:-----------:|:----------:|:-----------:|:--:|
|  0.99500417 | 0.00996671 |  0.09933467 | 0. |
|      0.     | 0.99500417 | -0.09983342 | 0. |
| -0.09983342 | 0.09933467 |  0.99003329 | 0. |
|      0.     |     0.     |      0.     | 1. |

![Set 4](4.jpg?raw=true "Title")

**Results TC-ICP**
|                 |                |                 |                 |
|:---------------:|:--------------:|:---------------:|:---------------:|
|  9.95022068e-01 | 1.03846176e-02 |  9.91122751e-02 |  4.99732003e-03 |
| -4.70369468e-04 | 9.95034072e-01 | -9.95337895e-02 | -6.96081454e-03 |
| -9.96537109e-02 | 9.89916977e-02 |  9.90085745e-01 | -7.61618565e-04 |
|        0.       |       0.       |        0.       |        1.       |

**Results ICP**
|             |                        |            |                |
|:-----------:|:----------------------:|:----------:|:--------------:|
|  0.94848115 | 0.25218485 -0.19179758 | 4.13124898 | 4.99732003e-03 |
| -0.25347447 |       0.96717091       | 0.01819672 |   -5.65909022  |
|  0.19008997 |       0.03135654       |  0.9812658 |   4.14308263   |
|      0.     |           0.           |     0.     |       1.       |

**Comparison**
|  Algo | Tolerance | Time | MSE translation | Angle error | Convergence |
|:-----:|:---------:|:----:|:---------------:|:-----------:|:-----------:|
| TRICP |   1e-13   |  379 |     43.12667    |  48.7014126 |     969     |
|  ICP  |   1e-13   |  61  |     22.03967    |  31.5126787 |     166     |   |

### Euler [0 0 0], Translation [0.6 0.3 0]

**Original Transformation Matrix**
|    |    |    |     |
|:--:|:--:|:--:|:---:|
|  1 |  0 |  0 | 0.6 |
|  0 |  1 |  0 | 0.3 |
|  0 |  0 |  1 |  0  |
| 0. | 0. | 0. |  1. |

![Set 5](5.jpg?raw=true "Title")

**Results TC-ICP**
|                |                 |                 |                 |
|:--------------:|:---------------:|:---------------:|:---------------:|
| 1.00000000e+00 | -2.66270570e-05 | -5.43844086e-06 |  5.99982492e-01 |
| 2.66291123e-05 |  9.99999928e-01 |  3.78277186e-04 |  3.00930349e-01 |
| 5.42836806e-06 | -3.78277331e-04 |  9.99999928e-01 | -4.38591885e-03 |
|       0.       |        0.       |        0.       |        1.       |

**Results ICP**
|             |             |             |             |
|:-----------:|:-----------:|:-----------:|:-----------:|
|  0.92677221 |  0.24783871 | -0.28225741 |  4.34546926 |
| -0.22461222 |  0.96794255 |  0.11241252 | -4.89057403 |
|  0.30106913 | -0.04078234 |  0.95272986 |  4.95350204 |
|      0.     |      0.     |      0.     |      1.     |

**Comparison**
|  Algo | Tolerance | Time | MSE translation | Angle error | Convergence |
|:-----:|:---------:|:----:|:---------------:|:-----------:|:-----------:|
| TRICP |   1e-13   |  77  |     0.00003     | 0.515662016 |     199     |
|  ICP  |   1e-13   |  55  |     21.80873    |  34.9504255 |     164     |
